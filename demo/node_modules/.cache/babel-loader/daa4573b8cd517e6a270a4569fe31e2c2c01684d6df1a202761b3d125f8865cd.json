{"ast":null,"code":"import React,{useEffect,useState}from'react';import ProgressBar from'./Componant/ProgressBar';import ProductList from'./Componant/ProductList';import Cart from'./Componant/Cart';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FREE_GIFT={id:99,name:\"Wireless Mouse\",price:0};const THRESHOLD=1000;function App(){const[cart,setCart]=useState([]);const[message,setMessage]=useState('');let total=cart.map(item=>item.price*item.quantity).reduce((acc,elem)=>acc+=elem,0);console.log(total,\"total\");const progress=Math.floor(total/THRESHOLD*100);useEffect(()=>{const hasGift=cart.some(item=>item.id===FREE_GIFT.id);if(total>=THRESHOLD&&!hasGift){setCart(prev=>[...prev,{...FREE_GIFT,quantity:1}]);setMessage(\"Free Gift Added to your Cart\");}else if(total<THRESHOLD&&hasGift){setCart(prev=>prev.filter(item=>item.id!==FREE_GIFT.id));setMessage(\"\");}},[total,cart]);const PRODUCTS=[{id:1,name:\"Laptop\",price:500},{id:2,name:\"Smartphone\",price:300},{id:3,name:\"Headphones\",price:100},{id:4,name:\"Smartwatch\",price:150}];const updateCart=product=>{const quantity=1;setCart(prevCart=>{console.log(prevCart,\"prevCart\");let exist=prevCart.find(item=>item.id===product.id);if(exist){return prevCart.map(item=>item.id===product.id?{...item,quantity:item.quantity+quantity}:item);}else{return[...prevCart,{...product,quantity}];}});};const updateQty=(id,qty)=>{setCart(prevCart=>{let exist=prevCart.find(item=>item.id===id);if(exist){return prevCart.map(item=>item.id===id?{...item,quantity:qty}:item);}});};const removeItem=id=>{setCart(prev=>prev.filter(item=>item.id!==id));};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"m-20\",children:[/*#__PURE__*/_jsx(ProductList,{products:PRODUCTS,addToCart:updateCart}),cart.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"subtotal\",total,\" \"]}),/*#__PURE__*/_jsx(ProgressBar,{completed:progress})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 font-medium\",children:message}),cart.length>0?/*#__PURE__*/_jsx(Cart,{cartItem:cart,updatedQuantity:updateQty,removeItem:removeItem}):/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg shadow-lg mt-20 text-center\",children:\"Cart is Empty\"})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","ProgressBar","ProductList","Cart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FREE_GIFT","id","name","price","THRESHOLD","App","cart","setCart","message","setMessage","total","map","item","quantity","reduce","acc","elem","console","log","progress","Math","floor","hasGift","some","prev","filter","PRODUCTS","updateCart","product","prevCart","exist","find","updateQty","qty","removeItem","children","className","products","addToCart","length","completed","cartItem","updatedQuantity"],"sources":["C:/Users/ameer/Desktop/cart-mgt/cart-mgt/demo/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport ProgressBar from './Componant/ProgressBar';\r\nimport ProductList from './Componant/ProductList';\r\nimport Cart from './Componant/Cart';\r\n\r\n\r\n\r\n\r\nconst FREE_GIFT = { id: 99, name: \"Wireless Mouse\", price: 0 };\r\nconst THRESHOLD = 1000;\r\n\r\nfunction App() {\r\n  const [cart, setCart] = useState([])\r\n  const[message,setMessage]=useState('')\r\n\r\n\r\n  let total = cart.map((item) => item.price * item.quantity).reduce((acc, elem) => acc += elem, 0)\r\n  console.log(total, \"total\")\r\n  const progress = Math.floor((total / THRESHOLD) * 100)\r\n\r\n  \r\n  useEffect(()=>{\r\n    const hasGift=cart.some((item)=>item.id===FREE_GIFT.id)\r\n    if(total>=THRESHOLD &&!hasGift){\r\n      setCart((prev)=>[...prev,{...FREE_GIFT,quantity:1}])\r\n      setMessage(\"Free Gift Added to your Cart\")\r\n    }\r\n    else if(total<THRESHOLD && hasGift){\r\n    setCart((prev)=>prev.filter((item)=>item.id!==FREE_GIFT.id))\r\n     setMessage(\"\")\r\n    }\r\n  },[total,cart])\r\n  const PRODUCTS = [\r\n    { id: 1, name: \"Laptop\", price: 500 },\r\n    { id: 2, name: \"Smartphone\", price: 300 },\r\n    { id: 3, name: \"Headphones\", price: 100 },\r\n    { id: 4, name: \"Smartwatch\", price: 150 },\r\n  ];\r\n\r\n  const updateCart = (product) => {\r\n    const quantity = 1\r\n    setCart((prevCart) => {\r\n      console.log(prevCart, \"prevCart\")\r\n      let exist = prevCart.find((item) => item.id === product.id)\r\n      if (exist) {\r\n        return prevCart.map((item) =>\r\n          item.id === product.id ? { ...item, quantity: item.quantity + quantity } : item)\r\n      }\r\n      else {\r\n        return [...prevCart, { ...product, quantity }]\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  const updateQty = ((id, qty) => {\r\n    setCart((prevCart) => {\r\n      let exist = prevCart.find((item) => item.id === id)\r\n      if (exist) {\r\n        return prevCart.map((item) =>\r\n          item.id === id ? { ...item, quantity: qty } : item)\r\n      }\r\n    })\r\n  })\r\n\r\n  const removeItem = ((id) => {\r\n    setCart((prev) => prev.filter((item) => item.id !== id))\r\n  })\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n\r\n      <div className='m-20'>\r\n\r\n        <ProductList products={PRODUCTS} addToCart={updateCart} />\r\n\r\n    \r\n      {cart.length > 0 && \r\n      <>\r\n      <h1>subtotal{total} </h1>\r\n      <ProgressBar completed={progress} />\r\n      \r\n      </>\r\n      }\r\n      {message && <p className='text-green-600 font-medium'>{message}</p>}\r\n      {cart.length > 0 ?\r\n        <Cart cartItem={cart} updatedQuantity={updateQty} removeItem={removeItem}></Cart>\r\n\r\n        : <div className='border rounded-lg shadow-lg mt-20 text-center'>Cart is Empty</div>}\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}